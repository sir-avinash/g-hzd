function [y1] = nnEquZero_raw180817(x1)
%NNEQUZERO_RAW180817 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-Aug-2017 13:28:39.
% 
% [y1] = nnEquZero_raw180817(x1) takes these arguments:
%   x = 4xQ matrix, input #1
% and returns:
%   y = 3xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3];
x1_step2.xoffset = [-1.71418047078468;-2;0];
x1_step2.gain = [0.5833691475567;0.5;1.02564102564103];
x1_step2.ymin = -1;

% Layer 1
b1 = [0.45734934551473261;-10.973268574222269;0.069647989679038624;0.73383054815564919;-0.68530849728937726;-1.8906873112923079;-1.2071911589767013;3.1958537651039096;-0.53915771238485344;0.75149097560702216;-2.5010434069651808;-0.010511686346243341;-10.134196745602891;7.6191376722354329;-3.9957003047585347;3.4755551644860847;0.3974537286516952;-1.4292387237178577;0.40133493466769754;10.075372438215378;2.1090193781588686;1.3590391825243999;-6.7475442132489949;-1.7475115620151955;-12.448086619192262;-3.965191047087504;-1.5576751308121672;-10.509723169323333;4.6398445813951517;0.32020099760339821;-0.53348159262936989;-0.28976214534647576;-0.90100228046369901;2.0971832277467857;1.5794947170103517;-0.13507869999252503;-3.5471869495827231;-5.3386141753230074;-3.218578091700127;0.94032354776001092;0.081973612390792927;-2.6724078879503237;-0.96910453334135438;0.73120506151969311;3.5674601428391188;7.7581711936013642;0.52521404135448435;-0.52151202332419411;1.0441467417404038;-0.31497880328142247];
IW1_1 = [0.78459347955305581 0.22345448064536894 -0.3566571538673059;-0.066477842164768555 0.035509457181040781 -12.167593252082563;-0.60106314170935093 0.21633252696546162 -0.011308875082942756;-0.30011784746874726 -0.20068870737017172 1.9438134603459085;0.29652059471952691 -1.0179338909080156 0.40309627184289415;-0.041814219389098801 0.013195452474097907 -2.4381349653404709;0.54215428101499752 0.36178688898934225 -2.6273744714481584;-1.0067804327375107 -0.49996771411868907 -2.633159981240428;-0.0092756825138532797 -0.9206992861292812 0.50907206954968343;0.28710820530306458 0.060917138260036537 1.6984198855001671;1.7046021222951617 0.60506693788680355 1.8506094237740378;0.65381676251026388 0.24750458845550205 1.2812794749986927;-0.17616200287054576 -0.033943260586759935 -11.298211885467982;2.1047181332782041 1.4295734296154352 3.2087859519178581;0.92026852172802098 0.76903974326347591 3.1738371408319459;-0.93042218469746396 -1.4338597220617992 1.3172939567419568;-0.36426324458865134 -0.96991483137945311 -0.63396648987777626;-0.27439717501170774 -0.18420321196281869 -1.579413580036827;0.77944665944861147 0.19140916329203861 0.19943032562105584;0.46788041728255869 0.20422150908387537 10.697222887498853;0.60457959600232969 0.89840233599645281 1.0035994762186424;0.96072360776756516 0.39813665309380053 0.38922977335289088;0.94986397602005301 0.82279913049466591 -4.8074923146415118;-0.91617455467977771 -0.45696811753755207 1.6632419395263627;-0.26155980984638272 -0.078325593501300417 -13.51968810171641;0.41005678984571076 0.30013832966226689 -5.2060469061787913;-0.67333415513665829 -0.49048673157825512 1.9914722471308393;-0.32537275268551291 -0.12290845168371191 -11.340019639803948;0.25985662390308067 0.020577402827936301 3.82722481154536;-0.67265742322208943 -0.53588034807377627 -0.10330656566272793;-0.87438376447303379 -0.45892408407615798 -0.50422127209328205;-0.34347129491389911 0.32710479363361666 0.18416368110187478;0.85433259267537232 0.25740992363531456 1.1306279797865406;-0.21543346082591466 -0.16148984525138665 3.0331781798852631;-1.0434396559036807 -0.43758834874391334 -0.31391824849574335;0.55547816092030899 -0.99636197395610737 0.44842398604597594;1.2757999953956631 2.9747379456102858 -0.36216510506635513;-1.9356700495223738 -0.85237345066573655 3.2393547671758829;-0.52410318429687508 -0.4039936944143323 -2.8048686044219204;-1.0202666442557002 0.016668385681419609 -0.51111329283602847;-0.44884968423684996 0.63371593260797421 -0.26112618539289867;-0.86712865029487807 -0.61333180247960628 2.6910952582667793;0.057785721565201877 -0.34604090608771582 -0.969502728246182;-0.62807095234131527 -0.75483655110975145 0.42753033149511477;-0.4624854000039238 -0.32949692052004398 4.5615795843320681;-0.32031247767782461 -0.27058828805619051 9.4557152890781158;0.60043461320422109 0.42704184931553157 -1.4307830004368915;-0.18163023696544164 0.86673733905905226 -0.56968585451003251;-0.4843348404287976 -0.31717382979312997 2.0300443076632724;0.1216283565747161 0.076160124883138239 1.2766472027621736];

% Layer 2
b2 = [-0.85360132099833608;-0.14587105067311951;-0.4613881857890339];
LW2_1 = [1.7310049082576067 -4.8610774926001543 -3.1975339910762539 4.5358996620037351 -0.26748161653446395 6.0587459941002129 -1.8395648371575213 1.8587245968692103 1.6485328750710915 -1.7635964067542629 -0.72582326352026716 -1.6398497958602973 5.9082080587984498 2.4276833002719198 2.8666010707004039 2.306996815525217 0.18827526807781214 1.4608908330288284 -2.2038677835584695 -3.6857519975834325 1.3505083270576614 0.53992024647119374 3.9986098061597843 -2.1543636784983335 5.7233318687492574 -3.4105268120245849 1.3202071929594004 -11.547287331487654 1.3396676564999264 -3.7519733688100283 -0.62582559780236624 1.7546740290078173 -2.614319131587953 5.9777581392969612 -3.4528177602864178 0.56193638611320229 0.28605114372442902 -4.0483726233109261 2.6402062962904047 0.0062272532404981668 2.9123805750399478 1.1141170801227391 -0.76584300599610389 1.8683794490000558 -4.0148512174441846 0.52570148180383836 -0.47893166217561417 -0.85675668480819422 -5.8732220207445636 1.6509095466688142;-1.9036756355860465 -0.0017853286881941341 -0.10941978758136217 -0.99861654041148262 0.81789804168378133 0.47826269938174448 -0.33804780279298646 0.68859280402270506 -1.1008589996671756 0.31653211998483727 0.56098151793552997 0.61909290548557805 -0.0053140670931855474 -0.67138248015424118 0.27632693918886664 1.2294973196788948 -0.52865696629922165 -0.50059283924565845 -0.15153707017272822 0.01576074837156868 0.085711205515738645 1.2028490765357094 0.95725602219694694 -0.64059928230153096 -0.012736680753085143 -0.0085480301662808587 -0.020184351736539589 0.041837649270776552 0.48936890453796578 1.3790361529895279 -0.57427345371635141 -0.90518064592353564 1.1796963872285267 -0.10519426647293642 -0.34615768990048551 0.23184543728231424 0.27460990952441117 0.34261285101356453 0.72414901350795557 0.68776554791725408 0.78335957805567813 0.11071593994383788 -1.1496828826561798 -0.88961956558719935 0.084520299915298011 -0.0070249480777282705 0.93231461021037909 -0.20477938684009364 -0.23295898941541868 -0.28217429549770451;6.9990617457063919 1.0200947040584987 -0.39514759007588779 0.73509594095111852 -2.1381179977644522 -0.72706930648853763 0.62587759127887777 4.8251621121300108 0.75617428272038056 -0.18215255524584054 -0.7408033066762727 -1.8162693831564771 -1.1830992041867359 1.0812391009171178 5.3074906625539366 -4.8563598626812787 0.22388128270037089 -3.2359500990668324 0.82173840124109065 0.95432920985331915 -1.491741809547523 -4.6057593294320718 -5.6825903171135899 -2.1837693695373916 -1.0213407632809604 0.91960900920937616 2.0609021831749996 2.2587524007256983 -5.2441322820445171 -1.3542204946020191 3.2840364811520297 2.0754801533070646 -5.1507093972304085 -1.1652744722785424 0.77435146612350281 -0.37154586757275226 -0.86097617539453841 -3.1792589400315836 -4.0625489535083315 -3.4203667387329983 -2.0399196673155111 2.3522297063469222 1.9270549843413805 1.4681830960844193 0.95888537167461219 -0.13444877675860992 -1.9134483199892915 1.4171212854480222 1.0733394404075207 3.6153920029849944];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.314491940119996;3.4632367725554;3.25539494941338];
y1_step1.xoffset = [-3.1797317273646;-0.288747222807447;-0.307182389706724];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = removeconstantrows_apply(x1,x1_step1);
xp1 = mapminmax_apply(xp1,x1_step2);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
