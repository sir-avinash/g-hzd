function [y1] = nnEquZero260717(x1)
%NNEQUZERO260717 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 26-Jul-2017 23:07:03.
% 
% [y1] = nnEquZero260717(x1) takes these arguments:
%   x = 4xQ matrix, input #1
% and returns:
%   y = 3xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3];
x1_step2.xoffset = [-1.69803432305843;-2;0];
x1_step2.gain = [0.588916246521354;0.5;2];
x1_step2.ymin = -1;

% Layer 1
b1 = [1.7194697396355718;-0.4576800875582363;2.7311063602807701;10.873371310375024;-1.384792115323215;0.555765550246623;-0.80368272840068333;-0.43537968066167043;0.42913876597666356;-0.025324274710613055;0.70778072286979632;-1.1925190020971077;-0.08509793048350392;12.080597372921769;-1.7039696552223806;-0.22080914056452572;-0.0061055512757910756;-0.99455513637291681;4.0680711887416017;3.772774789638119;11.730356638508511;1.4122427741598496;0.50109007130767835;-4.178225145639014;-1.210001730485013;-1.1627182366508229;-3.8251935965708999;-4.5232326543324728;-0.39341395827332903;12.030171763146031;-4.4319988758536129;12.049694952653326;1.5432965171785995;-0.17713707534498485;10.832593877157469;0.72186104824051567;1.6891080632891327;0.54981598566762058;-0.29208436832235424;-1.2416932392861373;1.4070755595238427;0.33914400058692512;-0.31743795925390061;-0.71956066999059909;0.29493554800788141;0.44323691119271302;-0.17477791130084161;2.1204464122423192;-2.7127579636940387;-0.07554356025932038];
IW1_1 = [-0.31524883776801677 -0.36252634268286171 -0.98994654076425892;0.50748699119318452 0.81128179574883919 -1.1508080844707462;-0.060723295674938102 -0.14745104046826044 3.4628207234830075;0.18603193170071816 0.22223091648049184 -11.284128147446223;0.024343581329454432 0.15101136032143264 -1.6076034476687677;-0.27848435368944485 -0.19172789813150168 -0.74981822755309913;0.088933652213892433 0.42414453293754095 0.082281903515341023;0.30041584941944849 0.71755919664148737 -0.86389151443432888;0.033025217950984544 0.16046022548434008 1.6495596401002839;0.43423813954430568 0.83408288447129864 1.239237420413219;-0.16112279862241843 -0.081639333879165679 0.83931765328686048;-0.11188029826218508 -0.12827070625541656 2.419920338914809;-0.46794339623587777 -0.68090040932602514 0.24773111963738406;0.2590998167141057 0.30795803565811702 -12.742890111140742;0.48872114037117753 0.70632469567105971 2.4091440691924713;-0.30749115498224866 -0.67016923891688962 -0.65197048753261588;0.48682614221213683 0.79699199491798989 -1.5973477772110136;-0.50376286302664619 -0.51061914588430901 0.1803877335897924;-0.12921417523561737 -0.34263439636697623 3.2694187650947319;0.11981375300807803 0.14751435037008867 -4.0071658055099997;-0.050022929517576337 -0.12264358716593037 11.46576218146175;-0.24812155102392802 -0.49277104981951331 1.4679057309811321;0.32218978205120347 0.69334865009752167 0.80661687223366241;-0.12941150085899472 -0.3091175227437763 -3.4469086467350771;-0.29672055903085637 -0.83811982258090145 1.8978107313739061;0.082654192261328363 0.10800048383468279 2.1634773922181507;0.10037312325217779 0.11458004449474149 4.0865835032135749;0.084718952596569377 0.20042007187341132 -4.4894632524032145;-0.12385427140654418 -0.29639338117655534 1.2233988941116052;0.047075541956152205 0.11327549184968147 11.788881053294803;-0.078123046817086025 -0.18241493889108387 -4.271144204082538;-0.25387327062175769 -0.30160100212521196 -12.715431191692652;0.59881505525425893 0.80464299841374043 -2.1764418729412878;0.33588831813243658 0.4992431671187082 -1.4876475639734841;-0.18046993515503179 -0.21409987517545823 -11.242810138409062;-0.085912531369767273 -0.37510219807569023 -1.3035841783617159;-0.1553808342022639 -0.36333191153206745 3.0438184954990244;-0.15186265333218393 0.16136289455356262 0.45271164616439763;-0.21706144846038933 -0.43391649352239109 -1.1636871513650433;-0.27169960848191527 -0.36359919597663271 1.7883930437493611;-0.25428847028545642 -0.34593537283426884 -1.9998719626784165;-0.15963809058573578 -0.1882068841747567 1.8296469039945944;-0.38987100185225615 -0.72495861359388059 -0.42997304219826221;-0.16075368950890132 -0.47496851490046743 0.016925310486176248;-0.11058545530491395 -0.21861737225209144 -1.4417089635709219;-0.48852676022539088 -0.56970020890448358 -0.088565874971449729;0.45015930864430537 0.72161848804363116 -0.72974238857701101;0.28316654166823418 0.35347242263712741 -1.5215192458684517;-0.014025520424019576 -0.016425840083159494 -3.4336659364698652;0.5244380375975779 0.96516391002006774 1.2421489353238853];

% Layer 2
b2 = [-0.77127583255044907;0.10368058568129578;-1.0165856217867537];
LW2_1 = [5.3834139565940662 -1.2776576072105394 -3.1911435875590661 8.5851365409393896 -2.2591672612003784 0.25138526474949618 0.89697621848476905 -0.48792930082953506 -0.75108815566540976 -1.8531828553227305 -2.0526528127555719 2.2382575517571035 1.9606261044649129 -3.6625089688149841 -0.73497201442784343 -0.85135171184909719 -0.72499235495183223 0.78493604560803876 3.7562242382383086 6.5021052003635029 -2.7632679159008249 0.66178501591027428 -1.8812813939027764 4.6317819304886516 0.19057469623770218 -4.3779355301015652 5.7749094445153313 5.4195674617692005 2.7176909362778727 2.4157923137574384 -6.7725238311938378 3.6052493955171649 -0.20229891672854908 1.1485519076585233 -8.548555572685208 1.2016612804347666 -0.33824024197936103 0.48324901902255363 -1.44285457230384 -3.5800812318213953 -5.3806121941530449 -0.05862800671009348 -1.4169821882912599 -0.31805410886377899 -0.67121767289601253 0.6735862137406271 3.0730140273600166 -4.9401027392063419 -2.677723124079241 0.97334332753286268;0.054589522588781039 0.3844501959100769 1.7609203352903631 -0.13966974059544982 0.56438148222585172 -0.19984441701906358 -0.076100966367831424 0.20658885360455931 -0.05527775837776161 1.4995767720438615 0.99728962847148639 -1.0350733141699928 -0.26329645439150573 0.045528379784510652 0.026224702832776989 -0.2909211615491844 0.32295084382009742 -0.1711303016889657 0.48241877462257393 -0.62071305793362186 -0.35151986904180083 -0.24648802661794456 0.039005878045931912 0.43435409130696179 0.15110597487766622 2.2563597057678511 -0.50406466167547093 -0.71814910087244199 -2.1645270471105778 0.35616412787456159 0.71142451049582744 -0.041648197738954403 -0.1273652851451785 -0.16355924239405559 0.14578066717370378 0.70553396299362381 0.13215191498607684 -0.27949850382501773 0.61824014249285875 0.00048309364886976958 0.9871819906562731 0.34636424197302473 0.13633391347853849 0.0019835497317478999 -1.1890666146703515 -0.16037741182117579 -0.5818061289566453 -0.50476728906917001 1.6609077715558564 -0.81081031679963078;-3.9611575275655668 -0.40099363398828303 -1.7162041906468173 0.93481460460616816 -0.55690502600911107 -0.72676868539307438 1.6267423858867527 0.42147173653984482 -3.3518114213375525 0.21590299871079022 0.33199415918453862 -2.142457226433264 -0.60965618523270915 -0.54780127579370963 1.1253636167344077 -1.055760607517584 -0.66415684974044509 -0.48609909787242334 3.2354446654296205 -3.2221428882069403 0.46634249378173592 1.0016808424248695 -0.39995372573850868 1.9857357610744828 0.051504880090893393 3.6595354872717918 -2.8365207614456995 0.1294598121913865 1.9876488829467402 -0.48610509957537112 0.55278604326814595 0.57861086278734375 0.79286706319205724 1.9759615888916564 -0.98360012528690954 0.77523003765075205 -0.1647908179326861 0.58927696332154178 -1.9400964928769113 6.6456691733675939 7.3429154227478834 2.5942679069184882 0.54259984337101219 -1.1679640176746395 2.9093573785882447 -0.35625381797648437 0.10478758600122537 4.3748592238425354 -1.340938840519964 -0.39428962947968343];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.05714490782958;2.30317514330608;0.663758799806519];
y1_step1.xoffset = [-17.4993719997282;-0.434183220024056;-1.50657136341016];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = removeconstantrows_apply(x1,x1_step1);
xp1 = mapminmax_apply(xp1,x1_step2);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
