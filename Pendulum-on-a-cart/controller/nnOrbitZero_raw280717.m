function [y1] = nnOrbitZero_raw280717(x1)
%NNORBITZERO_RAW280717 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 28-Jul-2017 14:26:40.
% 
% [y1] = nnOrbitZero_raw280717(x1) takes these arguments:
%   x = 4xQ matrix, input #1
% and returns:
%   y = 3xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-2.23590192559218;-2.83028458461259;0;-2];
x1_step1.gain = [0.447246808347889;0.353321360486751;1.02564102564103;0.5];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.31635277865557976;-3.3014655473695811;-1.3622154304581309;0.61706394005850262;0.12167744224049508;-1.02700883018051;0.49565276709489997;-0.86128400763164048;-1.407499628364216;-0.77543831452397982;-4.1607523134839575;-6.2382226144505282;-0.80115700613385321;10.337561234990748;4.1232909537239788;4.6330997558226104;-4.2768700835295927;0.90297086854943631;3.1464248218625475;-0.9201845826367;-0.69294919331765803;-0.34378482649126912;-0.86367740910629065;-5.446132983188777;-0.34470740192755833;0.72695128066916137;0.30964236752730501;0.041340208504046849;0.6695955220302573;-9.0939526399625112;-1.1401046594528221;-1.0713844626105364;-1.0915452381163333;-1.6715324409280252;0.045126862458905161;0.98646855864594662;-1.4372489664615802;2.0531094187086314;0.48342732182848408;-1.9268718102604008;1.9990266859500003;-0.11696775088910946;-0.45916528453857214;-7.5932011508628117;-2.8444739487816326;-0.88169410883179933;0.59304410434410226;1.9657189261182255;1.1985579812984031;0.10147566285870828];
IW1_1 = [0.01697719200726262 0.0097567556624446519 2.0350032127539484 0.6585920453671118;0.036287979919892521 0.10075644655074528 -3.4428206413013172 -0.00063504370303582981;-0.055685085808901837 -0.17053347646015288 1.7667487407760494 0.17441134819219642;0.11790436863458525 0.36850925371187576 -1.0140326347135489 -0.074926118208564985;-0.10563777717793134 -0.30858705693168281 1.0568391216617894 -0.30017175906852783;0.037514003059976868 0.054245812926873964 1.9734343661057887 0.75843360645852687;-0.0088312634558968817 -0.096035770903488041 0.65311585792299265 -0.37314435639663812;-0.013152565887662981 -0.010459056274293525 1.9330069559229308 -0.20082421530302655;0.06118164840103596 0.27948570467753486 0.3606265215245687 -0.33218202490577892;0.020244417176080269 0.055284423481138274 -1.4117235568996578 0.68012877907912728;-0.15438084226693813 -0.36339054476672172 3.2573884411126186 0.16638704456174244;0.23409923856074602 0.51943873927854012 4.7363547404011097 -0.18514982737685676;-0.056860238315666861 -0.12102321522324874 1.7680899753636323 -0.36244330661875701;0.032867597861559315 0.10015178195014192 11.172318538179598 -0.021080402007140023;0.28396317121682479 0.51023450897503697 -3.6545616518300457 -0.092869421625037418;0.063261001299236119 0.22168584762917268 5.2582495058885392 -0.067075287661777047;-0.45462409288274175 -0.61038715619311579 3.7144083750675194 -0.01866397980543413;0.0081349569467769802 0.025919753922864695 1.8189266278771132 0.083100679422316956;0.052522839782564987 0.18207683204494526 3.2799849052294592 -0.056980355201200317;0.2469444939098358 0.74976621135343891 0.40155462022089078 0.11484649065658831;0.024375526933609361 0.033238177157103019 -0.22490203758271288 0.32450621388182682;0.12884233286885496 0.41873898851862623 -0.10835030130038138 -0.22279474243083472;-0.068954643554901579 -0.26620705195463734 0.28162114009522982 -0.34899633581398498;0.08055863904427478 0.2833861848467315 -4.7889515683709805 -0.13033267225140122;-0.022165069546930604 -0.041783179359030802 1.5621013846276464 -0.1597238602340452;0.28036760043084957 0.8464163816138317 -1.5911579584195632 -0.091104881470103052;0.0096873770154529172 -0.015759788943765396 2.140852133424652 0.67671257427877785;-0.016607608525397929 -0.054399836967785449 -1.6264955279979636 -0.17304792304926453;-0.0074676733578683237 -0.030383678199706388 1.5616227291834057 -0.22591919556457721;0.022516819820569998 0.090078920210407615 -9.6131212242013202 -0.034389092417815105;0.22546350056695 0.6114547429868924 0.19488929880334183 0.36537987890234386;0.085889244920622249 0.19973596380187286 -1.8334071427751244 0.48078792866601272;0.02413105966242406 0.036065275565923094 -2.1761447206426521 0.43450602746460149;-0.19839836253935933 -0.61661184973874428 1.943744947357817 0.34280607797222984;0.02889719607879606 0.10228872113785073 2.0657191679232758 -0.038660396676688011;-0.0033637964924633137 0.0017944262601191133 2.082503237416617 -0.56208374598947441;0.24684165314435966 0.63464445596486529 2.4570586247351152 -0.87777948828602081;-0.17280811463650467 -0.47595047444901545 -2.4455637589180932 0.34498258408282717;0.075506206749326288 0.20264371602062153 -1.7213231746464903 -0.099211606263117355;-0.046290550228430295 -0.16011507951329154 -1.2548988604129632 -0.34198582376089298;-0.086307481877672718 -0.22985808977480415 -2.4930620344135908 0.22719606167572864;-0.075988424083686085 -0.24427925807981588 -1.3132453471734069 0.026012279760783175;-0.11247359409988832 -0.19275199819581085 1.2994372450072786 -0.23314316955028508;0.04305054151975464 0.15467906127128442 -7.6950270924775612 -0.054183151459920108;-0.039791746063396048 -0.14003813678419119 -3.6995280358308662 0.036983956338256276;0.096214650716468134 0.32217469527141884 -0.67340589054542022 -0.13026290290935241;0.35716524413581713 0.94961835787109072 -0.8858962196810698 -0.62123091054786872;-0.015475746948981146 -0.055850857748465529 1.2305387651422723 0.72344422793612506;0.13147507087319896 0.44364301112618038 1.6387094214426026 -0.038073023189661943;-0.05967588509316208 -0.22256946610292919 0.91366536064541548 0.3657085461725027];

% Layer 2
b2 = [-3.3417416840374328;2.3197482343289177;1.239140927582534];
LW2_1 = [1.0421065803131484 0.59904125670756714 3.6114210493535852 -3.0532933127344037 -0.25605886329383049 -0.085340948237970338 -0.8168800734151499 -4.1811430106580048 1.6950119531193049 -0.44774599007975324 -5.3591548432706588 3.6232987946428072 1.6195255353213707 -0.80380973762489705 -1.2219807412087282 -2.3668758930664198 -0.27848729251519139 -6.0006233939710913 8.5617826485327768 0.51936815512760981 0.25680986469882738 1.3071116711383035 0.027066507059563795 -2.9097003973125415 0.34018693001531641 0.29059886154027653 -1.0598851999180585 0.55233247303748134 4.7671435877712138 -2.8387141595061283 -0.42773304426952369 0.22935386074761052 -0.64446615438643695 -0.85724768358458803 -1.771671672136625 -1.073278269009696 0.045437729991592145 -1.2093836399008699 0.040671085302013479 -0.099719001740945903 2.8959750744247916 -2.1927361504212799 -0.12014793128761679 5.2925427778560259 2.5673997195145892 -4.4811046070627158 0.038106577710369009 0.40980461132240642 0.72099308475593193 0.7600627765689788;0.31328534272141773 -0.81020962561923138 -5.8369565376831352 -3.629067516983612 -1.2366812342413951 0.022659366621430973 -0.2433537003562547 3.5025042225589988 -1.6889066575087053 0.052599175217026686 1.2133062561273629 -0.09206284061453078 -1.8791879708690187 0.011952504413225613 0.0068130230160028966 0.066783384302277773 -0.078013245488137747 1.7037356635908922 -0.48437423227236753 0.12531855844132975 0.95663547748981914 -0.38536716684053396 -1.4312190651899044 1.1083991636821058 2.1563710219012928 0.39626628763859173 -0.11424865690069427 0.33877667947222101 -2.0034709415696712 0.28746541902962408 -0.34401761183171842 0.38577953652670327 -0.91099147571964767 0.48881485637005329 0.29330607474684423 -0.26381525907610098 0.13140151972609621 1.3479330230097777 2.5409326518270849 3.4857758017888845 -3.3520306301030942 -0.94602796604836858 0.47312403638599049 -0.92543480574458803 -0.35279810639044856 0.51824430473501981 0.036048298290165773 -0.061342810412065338 -0.026178766314011545 -0.98674592480091605;-2.0999906668110047 2.8161649069287327 -4.9996629658972696 1.0385120346013086 0.70325411184830744 -0.25476927571699254 -3.1048446657098818 1.345681529497105 0.44537009887983908 -1.163625518665983 -7.6128964742855141 4.1487889555092439 0.44355184247397467 0.39718752584854744 -4.5574482739698761 0.75705620256527895 -1.3274786586424197 -1.2544372484747057 0.56433413264920063 -0.11038080150670215 1.2209145692790375 -1.509671897612644 -2.8034275999925304 -1.6161210462182822 4.3892900291867356 -0.37041022516269356 1.6469386393559569 6.6478844243805888 4.2177824025349073 0.83622338606365709 0.27534913921974336 2.0039725938347108 -1.9575903025924164 2.5076241468729195 1.6317195970216216 -1.4757737440494896 -0.062500367341034813 2.7014282374855765 0.18415999970212099 5.0584866755656552 -3.8696500067148887 -1.2382758432910037 -1.8002249101642624 -0.77292828655291446 -0.83710566721825486 0.71000546328417125 -0.083505304228470523 1.0650732484333818 0.49996772882063367 1.2387285219426698];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.0634675943525522;1.92079559266281;0.657408452975517];
y1_step1.xoffset = [-15.756072216085;-0.520617604403024;-1.5211243413039];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
