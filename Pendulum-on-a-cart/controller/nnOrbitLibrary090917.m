function [y1] = nnOrbitLibrary090917(x1)
%NNORBITLIBRARY090917 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 09-Sep-2017 19:55:04.
% 
% [y1] = nnOrbitLibrary090917(x1) takes these arguments:
%   x = 4xQ matrix, input #1
% and returns:
%   y = 3xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-2.64208283111662;-1.62340701369921;0;-2];
x1_step1.gain = [0.378489269223192;0.615988468470112;1.02564102564103;0.5];
x1_step1.ymin = -1;

% Layer 1
b1 = [5.9573645150314789;-8.7979834487067734;-4.1165555682693409;2.5322602736491606;4.6219737576315909;-14.725008967964964;-1.3919766070131758;-1.9165374032190514;0.26635482881078976;-3.7754018159875935;-2.766634792807948;-1.6254167132345392;-9.1673896565155655;3.9322996214231338;-1.7615555280437201;0.88890605646064691;-1.2248649257602704;7.3452825647530364;-2.6499485661427009;2.00310650267514;-0.0031044352524164779;1.0938907127778186;-0.39220614280989019;2.1539653532495922;0.2608330962931722;-0.47047841730873169;-0.36738930855427443;-0.39616957652546703;0.5896483204043812;-1.3381168839983451;-3.7949501549433671;-0.43589072875534202;0.25010357006765943;3.9078467705811266;-0.89840788105604652;-1.0393593714245895;-0.90435739194985421;-4.3797629231927484;2.2376135702145468;11.339792113024361;-2.9026854714316377;-6.8920416691506681;-1.5664836379085445;-2.3182969397977726;3.1123133422773206;6.4206973562771381;-6.3391815360573451;1.1681208708679154;-12.916744091839156;-14.264977385203828];
IW1_1 = [0.077473378235358048 0.62112127959182173 -4.991325882463455 -0.30592334121722592;-0.051031886923842272 2.5900655452686339 -7.1684196241880525 0.14574623757501767;0.040564932016256119 -0.11399206049182975 3.5387702139124975 -0.092390136752832544;0.055251961967013513 -0.16644844787715582 2.4488784597788635 0.31204563727928258;0.37779357204756037 1.9077748914907606 -5.0714765027641748 -1.6935826214315921;0.032769239308145758 -0.10383884800551323 -14.263189374074022 0.047611228266958135;0.041614514622101431 0.25736009390501113 2.0583821451029443 -0.36071372074444086;0.035424947369524923 -0.018480428572955003 -2.1538614824641447 0.53231089107513407;0.051812405890648783 0.094502232901097744 -0.18813942573097411 0.25994183873952281;0.040442651346521821 0.34985272573269427 4.3939650161344295 -0.17327254823093058;0.75968108604012241 0.74506729984894171 0.22841702839314854 2.1251250781092987;-0.086454845822769882 -0.18692170145427681 -2.2659715036140686 -0.20114014445000045;0.013254176443083219 0.017650053939342259 -9.1321072982794949 -0.011343491507756891;-0.29140590629967239 -1.1099327239892092 -1.0104523207760494 5.4995995172497327;-0.1398904873075783 -0.24206379945485212 -2.3081494193464871 -0.36251175395565244;-0.041067836789487125 1.0010434605625422 -0.42049613616872428 0.28013634538737525;-0.17138889361535059 -0.035065239504312555 -2.6402610822446455 -0.63236883848080383;0.075693246277648063 0.62643268255776718 -7.0798611745076148 -0.3078680381982033;0.13857009109910964 0.03248326712731852 2.9071792229504214 -0.13251667911278212;-0.059513887600189615 -0.0078910585335350576 2.7749878563320953 0.090383688552762395;0.047505978074400892 0.078071007290012623 -1.5423730046907509 0.28551650716437338;-0.10678850334669701 -0.1624437010569631 2.3739782692672464 -0.60764567073251807;0.025020787383614809 -0.096741618312852995 0.87280259298357965 0.25414400978527912;-0.060638075708819364 -0.010948166478530219 2.9400128473472003 0.033847074885344115;-0.02447906826024079 -0.16034946610829814 -0.21260628338218293 0.58363892345426149;0.023284848483244407 0.15590315364495916 0.4156129126323192 -0.33234931051272654;-0.032899182912377305 -0.029905026530412489 -1.548665004038033 -0.1147372335863908;0.01876799771805731 -0.071377172522072319 1.3366539964467017 0.25419301401212213;0.17628463104514921 0.22654914202383764 0.4930705833229666 0.76396790211329557;-0.05183127412780187 -0.16274296731138665 -1.9153161171481627 -0.072312708772340722;-0.026453804004028775 0.044010796640555232 4.2026441036035189 0.044341368723591804;0.01486118613359488 0.12365240458990455 1.9423336478039535 -0.2813577811582651;0.18367661548443781 -1.282282556033411 0.01968457041084536 -0.56302913712140024;-0.05459741954920564 0.38128786541102028 -3.1976302373767389 0.20074657715693617;-0.0010699103643692957 0.069166442332550315 1.1411639411632715 -0.3013921800958545;0.048951308639511797 0.25261851550004977 0.4768965331567564 -0.084125564829867785;-0.0059080345265131468 0.4163201616154491 -0.87902587053194692 0.13188144031929211;-0.42697388204031939 -2.5108680179380189 6.3243790953078873 4.2645736897489295;0.0060333249391819922 0.074459123099886115 1.6362069641912471 -0.10872577760743737;0.014476096196211468 -0.0044037041421005228 11.171954785158952 0.0058767807288421722;-0.10152594166291266 0.79889910256807284 -2.7871610134355205 0.69492206972102688;-0.0023729428899358748 0.10871177781799238 -6.1608346628671766 -0.059624921548369417;-0.10053362077261005 -0.26701924825155615 1.8185191903027704 0.31777212585863673;-0.064795548110718998 0.58994504681646653 1.950516328846589 0.36417483927462602;0.046154819829915684 -0.33742337784425169 3.1350848837516159 0.21125225713075699;0.093484443908266671 -0.22203511512838575 4.9716570651127681 0.85876330912183785;-0.28633272045903568 0.40939692270853556 5.4188662356126915 0.51207217437150643;-0.0016434031255371205 0.090925426328388015 1.2744586107483313 -0.46356714671184918;0.14915040154489934 1.1375471510716653 11.057365676326105 -0.59416560912563898;0.012218966970755536 -0.058421696172254615 -13.974369443688573 0.026229618960076213];

% Layer 2
b2 = [-1.1452093719687058;-3.2728957771213798;0.63070558759464512];
LW2_1 = [12.275209589904994 -0.045319367887271991 -6.9434317999376143 -3.5343045203948456 0.043050282944247766 -1.7324855941375856 -3.2032350637844513 -0.88885844859043073 5.7652491718077465 -1.821189796789757 0.0098906518962023297 3.9910850511389202 4.5290084105182222 -0.011021454659983753 -1.0073743433768922 -0.24697280715106917 0.13641480441008819 -3.160223845616398 -0.048344081151279743 -1.576752319143145 -2.0843676329553116 0.46674252669807859 -3.7163332996264979 2.339517738311033 -0.85125692696403454 -4.9899473592120813 2.4499401819131221 2.1309141455265661 -0.22506421835361629 -4.7633334523795154 3.4739569619882156 -1.8832386366691671 0.024510981873709103 -3.0063318322990402 9.3420824961545303 5.3271925859440108 -1.1994416050228682 -0.0030267704776697256 -4.8111116453880483 5.4390080691399945 0.035826023826817155 -9.0291386902915782 0.39944864688157916 -0.55023380702873403 1.7363945650303008 -0.6866429984050596 -0.1551885311709634 -1.0837512362254969 9.1335170248010353 4.9836919919620568;-2.9267855088114563 0.036771627361722702 -1.1845429360570514 -0.59907582097874235 -0.12378973460191559 3.4204733067948792 2.942320099419073 0.52158443869610915 -2.5086852865612461 -0.53165601074365754 -0.07514073063366751 -5.5955676699105661 0.81976121454686668 -0.015317307365906608 1.9193611339262067 0.099022024750942461 -0.099830979519700061 0.26082926685840796 1.6429218636433081 -1.1127423688899827 2.9053020481676604 -0.62391685055212898 -1.2846763870012976 0.79341469885085958 -1.0691325874917939 -1.488363629320778 -3.9644679760285717 -0.17674266065213529 0.11540913787024032 3.3386060546120677 0.60691274274013052 2.0391632067108625 -0.026561004330053723 0.90921879227673841 -4.840824072759661 -0.7943347868513585 0.6682463753990584 0.0057018574787048772 0.25844482165166549 -1.1554910945294836 -0.011556682203945271 -4.8316413876708628 -1.8916342145765457 -0.13635922869929024 -0.11092723203811566 -0.41911130125056406 0.36741126742244523 -0.068636962289712652 -1.0218534252574214 -3.4145494496474518;5.4436825500331523 1.8369975216837128e-05 -12.446776954835723 3.6866729667446347 -0.0092611282435300715 -7.5279109647955691 -1.1963979904211579 0.94511934252888119 0.33680843236114349 -2.8834387160618866 0.038433859715305989 3.7720992472227604 -4.1386851506347719 0.011175923320576408 -2.172465646556307 0.13924264403788564 -0.35353693735704939 -2.5777344873399506 0.29788946869826599 5.5385499607884148 -2.0861217138395491 -0.14825296617915451 6.0189934096906281 -5.7114753100959135 0.40577830507507628 1.5296897656606545 2.4807773741015362 -5.0476064107908316 -0.053801065477009025 0.43166962974560474 5.2284139897001545 0.15678804726171222 -0.051517623657474892 -3.5877095737906455 1.5206665562221564 -0.36300383863175173 0.25691152699301845 -0.0020685710120673419 8.097680774082006 -0.3317679010213857 -0.031222061213479098 15.370627232287969 0.59333274728513397 -0.35094610938539955 -1.334041698711133 0.58010809736431945 -0.040169470762743124 1.1474286957683075 7.1764208177968909 5.6984920246906379];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.0564028156207684;2.3412194922476;0.667262164610253];
y1_step1.xoffset = [-17.7296113519834;-0.427127829461186;-1.49866132539989];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
