function [y1] = nnOrbitZero_raw270717(x1)
%NNORBITZERO_RAW270717 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 27-Jul-2017 11:39:18.
% 
% [y1] = nnOrbitZero_raw270717(x1) takes these arguments:
%   x = 4xQ matrix, input #1
% and returns:
%   y = 3xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-2.88925119022177;-2.11452251718336;0;-2];
x1_step1.gain = [0.34611043975143;0.47292000528424;2.00501253132832;0.5];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.018394526173462895;-0.94328702507672857;2.3570995414222322;-0.41730401449672133;0.1920016082747458;1.69964939358159;-1.1552917270152425;-1.4792175005904324;1.1811458302065216;0.30717951815458516;1.0064082428588959;1.1931816200739154;-2.8372784227615875;5.7556966961190312;0.93848026151270292;5.3734810111465645;-1.0225334780187849;-0.37481912618370539;0.99210185368673431;1.1740144834194115;3.4095285908407522;-0.25154532022701609;-0.27491793551299987;-1.0852430039947885;-5.2605983950383539;-0.18293893552694385;0.90890749785944869;1.0731710159278662;1.8228106300438034;0.875761655438968;-3.1227720865046158;2.0218142877085024;-0.050787150240137142;1.2367407608666936;-7.7106871331337503;0.40357069021374137;1.3513053031539755;1.0839240255068487;-0.40533270668201798;-1.7812574923384876;-2.4070531846296515;-2.8849070343681813;-1.1057995804104277;-0.18138207725419053;-0.45260492758454313;-1.3077645956447306;-2.3924054678352431;0.94443569810496553;-0.30983119799188685;-2.1426878781242875];
IW1_1 = [-0.057524812519216185 -0.10076176504149621 1.4983686856708323 0.14589151727520699;0.16696617142546 0.24061312051431683 -1.7462936598139345 0.13707039765344517;1.1356585285034748 0.9987848139131944 -1.3371393600384132 -0.52633212348001934;0.38813160534171476 0.44405500037411738 0.91426808073809973 -0.20000251207178063;-0.23779465113770382 -0.21676838675818416 1.178940005985061 -0.56198607194486805;0.1624765778524912 0.13008918366324426 3.7508602094563526 -1.5615290709359557;0.37963526650252372 0.39474567105284225 0.89144768317954948 -0.63148133874281631;0.14189927589809506 0.20358264350292732 -0.49000830411821639 0.43943791013850542;-0.26179747766236139 -0.34173750324002894 1.2331518867859943 -0.29776891133760652;0.018912033790070806 -0.17579466600360313 0.32613775484927743 -0.10598051401026493;-0.0092550357992980444 -0.18212896310627952 -0.44099938906061448 -0.075918485194934243;0.17478558844452127 0.26071860905063488 2.1187036275291473 0.52676983192112681;-0.16722277774798919 -0.25346853672118175 -2.8670746618124685 -0.14427134728549493;-0.48144194702972154 -0.36717200995406396 -4.2823690488801471 0.088170529141030837;0.31517031032852338 0.24615565727811944 -0.065941711541024781 0.33827665789275357;-0.74437911738990159 -0.48331386365727852 -4.9592645298849352 -0.41537545729071607;0.0032400520677692184 0.015337698514377392 1.719590102219843 -0.11661177660797718;-0.39631612970651187 -0.37943276246504504 1.4652785062004405 0.30784813546401063;0.46708245195973802 0.25687718085604305 -0.85390563566076771 0.75733063264098222;0.039275807872643287 0.072886747418854203 2.3584535121623653 0.68731439882650658;0.78326507361766562 0.55946761065697681 -2.8993831225210056 0.45818753553540553;0.47563076551962202 0.48390438676464975 -0.70028889454202159 -0.170709899767058;-0.087894657791764655 -0.054713475396074344 -0.66638146013939215 0.58203161855415075;-0.32997787802395745 -0.42050860721738115 -0.99436533104411284 0.45458534538693324;0.686777728855546 0.43362744483342325 4.8946090087236378 0.32592588109922516;-0.25608822998532449 -0.26751031077287557 1.8143499771733371 -0.69066433901875346;-0.22527549118450774 -0.22638536311895499 -0.43362819900649835 0.51763105431039136;-0.10633600462228188 -0.16951613749539546 1.9171805516796214 -0.38164855899363886;-0.1420917465527444 -0.083871987205558954 -2.0328559026264958 -0.55887151921806744;0.12284781855533847 0.13251839710327287 1.446352056897221 -0.39349180445772419;-0.0065454369454799339 0.010322694485896951 -0.56232486293492079 3.5297162325784459;-0.85436106089526642 -0.79129152520713519 -1.8049946590543775 -0.49684179268608991;-0.19827525516196623 -0.2181923299209855 1.3758369223577327 -0.55250302805324403;-0.082583598746789555 -0.13522125988360983 0.75522708696260066 0.44172594983040547;-0.71725241423092023 -0.50292152899719089 6.0037476578887521 0.050852096959376876;0.060738052580454428 0.035647231118053846 -0.019963618472463682 -2.1523134942958002;0.0068439378969195209 -0.0093036071940800127 -0.95268083592636643 -0.64265596970649741;0.65839254604838748 0.35515354040898811 -1.2964789386899587 0.050859662055874839;-0.078478761739142602 -0.044982890231671582 0.05736433586353213 2.0880549274708282;0.18132036528476433 0.11088402461292855 2.1697742852866342 0.362393162235501;0.19612036599452143 0.31158607762261842 -2.4994899086879205 0.12083514472290274;-0.12742567224242135 -0.18753593521122444 -2.6503357643168486 -0.072166927743048059;-0.079905709715518747 -0.062304979776618009 1.6828257856268796 0.070835872214996543;0.26542081076861351 0.2794315667732184 1.5250086882311156 -0.43104483699449625;-0.4735312553338612 -0.45580076514309092 1.2804349828783204 0.29818541158601725;-0.01032880188160029 -0.044983599550990377 -2.6869665524919712 -0.91513826849784285;0.11099653593914093 0.15833341407946613 -2.1848641946181591 0.018662063103221802;-0.16563515503433335 -0.22779904280406657 0.79778347021544604 0.58826393887269057;0.16621030336549975 0.23526720738822887 -0.56010576094169762 -0.31194027720965883;0.34377023216869329 0.51235806729640909 -2.1521381194750453 0.068187821089627704];

% Layer 2
b2 = [-0.86399430523534693;-0.30406560960620127;1.4783447735578514];
LW2_1 = [-1.0370456287358734 2.2624802764919494 0.14612458817829915 1.1563608698981374 -1.9914149525823026 -0.043958814296911258 -0.89284266471916907 -3.8560544535204948 1.0743904160622519 -0.86999549976863677 -0.69704557801205647 0.30920433921894552 1.3274809154552087 -6.9366780735684861 -1.8943479584114935 -2.0761476741873652 -6.1613408073792009 2.1862303592650041 0.32168740123943945 -1.8111423896369305 0.62885113458381425 0.61375302496891737 0.50305010700432706 -0.5623542744437573 -2.3867154503034698 -1.3866079530281989 -2.2316802597571685 2.6381423015848458 -2.1979382495686988 -0.73873619775950228 0.29664831839668221 -0.25329396181877356 4.6681063820068962 3.9455396948879051 -4.7400768575656587 -1.2235607194228271 2.193463497313572 0.32851773384722116 -1.0615207557381634 -2.5673397323947578 -3.1372099678953109 -4.6432444931932197 7.208936195749664 -1.0467865563421572 -2.1814025014243312 -0.8330477011741787 8.0174375523383361 -1.3436517240916686 -3.1153826111115723 1.2908978234920798;0.87677123815292357 -2.4281583212408218 -0.27464746964342174 0.048269040760812322 0.2994356269247393 0.073311719229793043 0.48850429273759738 0.51213510382687844 -1.3228619122571965 -0.020146123706029237 0.69427979608601131 0.39074287172637095 0.35146745442734745 1.4652318268184861 0.029476249432564015 -0.35574167333461093 3.5222068747232287 -1.7434575750692098 0.12264440438365311 0.23680751332957042 -0.11491305651243298 -0.16212308527268635 -0.45949788038987066 0.025802482394254748 0.033045575575111737 0.33997189556547908 1.8006285608107553 -2.0562667043676766 0.9145725437195017 -0.22923207127026854 -0.00056274303330990463 0.40503989937202217 -1.6193111513051233 -2.7532979280177208 0.30763161573352288 -0.00093821239629697474 -0.54603491127577941 -0.010248038241160662 0.018559111862964633 1.2915492729749558 0.48020717529461293 0.36725757235247014 -3.6863144678420552 0.80410979877887223 1.4010470501243202 0.12925049042377429 -1.8132359801449283 1.3587624419074791 2.2997339156508749 -1.0430402028917718;-2.5933589888428097 2.0451457756921587 -0.34682259028099022 -1.0462826407288148 -0.57293797417770564 0.043456156859712637 1.1431257707608116 -1.2434478259306101 1.6083062056088937 2.1435255795085997 -3.6403156288195677 1.6083266994124876 -2.8391968680070923 -7.4204073800985197 0.014442961415064105 -2.8449058776505858 0.92683862222883939 -2.811170411621863 -0.24626950771967146 -1.4923649405742165 0.01887252167861185 0.017194819367462304 1.6381976804342098 0.17862025892604763 -3.4831284609878281 -1.3044315306808349 2.7236468574121528 -1.4235754388734532 -0.33071071672054542 3.2303821788711446 0.077007892739729661 0.047201929514606618 3.3148969575225142 1.2315413492102953 -4.8339962607020688 0.41008121428426675 -0.5307486219747698 0.25855764966955314 0.47682591560871995 -0.58869779905834829 4.3143682365109912 3.2859875477334972 -1.7640273446016914 2.0012174361091959 2.8623576241043724 -0.35459224755441221 -2.5892541459560565 -0.52609660727526975 -0.85917632849776782 -0.8999475756500438];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.0325208361482646;1.70636223829242;0.346055868543208];
y1_step1.xoffset = [-30.7495168771471;-0.586042035834499;-2.88970681008735];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
