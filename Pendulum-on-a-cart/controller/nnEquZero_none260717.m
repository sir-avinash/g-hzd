function [y1] = nnEquZero_none260717(x1)
%NNEQUZERO_NONE260717 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 27-Jul-2017 00:02:19.
% 
% [y1] = nnEquZero_none260717(x1) takes these arguments:
%   x = 4xQ matrix, input #1
% and returns:
%   y = 3xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3];
x1_step2.xoffset = [-1.69590442012002;-2;0];
x1_step2.gain = [0.589655872191919;0.5;2.00501253132832];
x1_step2.ymin = -1;

% Layer 1
b1 = [0.045243627635579285;-0.25953897720208596;-0.3576341968435115;1.9702618612030021;-0.024564151003516867;0.13451347048983781;-0.44313787978751412;1.2950512069558293;-1.5909248412058388;1.85132518763624;1.4229508841991425;2.0739560451217387;0.52655587783873326;-0.34511266897221649;-6.497852262266453;-0.57641432165002349;-9.9464101769461202;0.65054070278148868;-1.3119010072355115;3.6313047993074927;1.8405771890761675;-1.0720061761172242;-0.29220826795834259;-2.0130142771203614;0.72441044430948531;8.8473226132098137;0.58180421908193636;-1.7573291540933369;-0.88721231151433089;0.72918515192925604;0.093427936115506316;-5.5977919943749983;-4.828132274614692;-1.5978900755672398;-7.1974062651533908;-2.7433982607496024;-0.44786838724434236;-0.031169290158238595;-1.2883975112015065;-0.4608735045096376;-6.3057565135252291;1.3029445855056736;1.0774853010461949;-1.0846376829588866;1.5756189490377293;5.0736333295626386;-0.78695086470974529;-3.1319794723643333;-2.1467524288836519;-0.82444075187243737];
IW1_1 = [-0.032625060399241096 0.17645342899781183 0.78574987619827708;0.21102336885002562 -0.39403298759292943 -0.41923537672481398;-0.38073941984213572 -0.31167416613234328 -0.68163604244834897;-0.23669913556338237 -0.47594063671666192 -1.5271774276145047;-1.0001644300930466 -1.5155742584778014 -1.3855214232330502;0.4429373454248367 0.51039376262499403 -0.29455622679003013;-0.16292972086722357 -0.55949537028242968 0.27239077614874246;0.10571132489409266 0.065178034528007064 2.2075088556963354;-0.065790673329319871 -0.42377408049380899 -0.6494566047265764;0.021473486500154487 0.090029022023793939 2.0460079512982943;-0.1097983469396783 0.670682946879256 0.40642906227245362;-0.49158393637727182 -0.45941400316051206 -1.5358351865611022;-0.45987155178262917 -0.71522781159584448 -1.4514991732657616;-0.23058074873534457 0.18558428112872191 0.042004433869296358;-0.069110990219365634 -0.20105126713002144 -5.6786725142012715;-0.57324627855154442 -0.48413872756317394 1.1463194529034519;0.63627644111580595 0.7888406479705472 7.9040296419872167;-0.29187050503372119 0.12749537654875354 0.26993755475859416;0.11991910139338283 0.26884155733438558 2.0663327294642633;0.10075312932348926 0.25866574399042802 3.5592538439508012;-0.065322893575903276 -0.13069533698696434 2.165174412711858;-0.12728399838577384 -0.19340077175000492 2.0655784702425048;0.44592606813126129 0.46845887504541861 -0.65557039589210719;0.29915560914570521 0.33384694896220951 2.0850057411268308;-0.50760871147820774 -0.63480746263153276 -0.48946964190586023;0.50185911301710207 0.62185018871424358 -7.070171742226222;0.41937568452411633 0.72627507196858121 -1.6754442617355605;-0.16736756005288744 -0.43476218210423462 1.8059892811755671;0.23730234206888998 0.46882816271070077 -1.4911717359016965;-0.20604200493202871 -0.39837298899668422 1.5539275821114149;-0.028819412322842897 0.16513469521010787 -1.0790458737890678;-0.21371877871122891 -0.4721393972014048 5.0189585109146755;-0.11591493830523757 -0.32743073974249787 -3.7797004524844677;-0.5697473991692199 -0.71598350935539656 -0.17454381890557916;-0.39527663222034831 -0.61887522662832828 6.4905203980882078;-0.26842438673497021 -0.40400616214494722 3.2661882040178307;0.39967900545793639 0.57638874223914438 1.3687011052492419;0.67913064434445647 1.1574977033909941 -1.4009002222332541;-0.089920823584181811 -0.055487649148858793 -1.9439603431185499;-0.327304363299599 -0.54495129486979055 1.633822925883585;0.074942491604958264 0.17984477199856644 -5.4920602540649579;0.57436444632194739 0.83979939964324035 -0.28714881406453785;-0.063706813570266016 -0.062975505202623738 -1.9886918853527271;-0.73298701901588137 -1.0424595077892602 -0.36947016138014266;0.41687621366324223 0.37540232429511472 -0.83144554312020069;-0.13779833728079649 -0.35181003182578802 3.9961896960107719;-0.13607389530034994 -0.80141017943006598 -1.7348285116988702;0.12856226349007965 0.30623350268095695 -2.9922616929004637;-0.28711670718490501 -0.37351668147948563 2.3434625648059564;0.2036798432797029 0.55456954064963115 -0.12394663099010206];

% Layer 2
b2 = [1.1192442097987865;0.15160537484488226;-0.40830862151586728];
LW2_1 = [1.4394759081189976 0.39144335415843035 0.8065966890782148 -3.8806190262548785 -0.031995876916933501 0.764303981430415 0.94796243130445246 -0.56069529608519442 -1.1128421506506052 2.0826029813437641 -0.69495732196680604 -1.325418554057431 -2.0023031996704512 -0.37376542237333821 -5.0924024563878696 -0.071893702726285577 5.529543201252868 0.43170658800122497 0.88919292999226274 1.9846017245889938 -1.1421959596960189 3.0328861719730518 -0.061718382313277968 -2.7282868145354966 -0.67089749509858698 5.964338927420183 1.6567462649379536 -1.1324121531921432 1.2469320492882443 1.1064198868422177 1.0325130891231393 -0.88799813100470515 4.2441768255100252 2.5717972988213655 0.81639282273068703 -0.36797995921268445 -3.0111225449458376 0.11875563077228934 -0.79707271690266612 2.7830845769350119 4.3381546747754403 1.6085083387928047 4.0485549465004924 0.16983649978379506 3.3150330409710023 1.4984785772777296 -0.013233887973976653 2.563199986804622 2.5148131721993874 -2.3395002159572589;0.20066650053155133 0.18557112914440108 -0.16940350285689323 2.1203632462644131 -0.028205934225894288 0.1637938722880895 -1.5946918744418506 0.66869436405716554 0.90817093957958728 -1.9286146310386396 -0.19283510991664188 -0.2638117258962725 1.2201215934364686 0.011925674740123744 0.1496362556606762 0.058748859070323615 1.056670298375999 0.33746595309477789 -1.2454156487501995 -0.49659531981369592 1.6266056638923736 -1.9826715079871273 -0.17958026568936189 0.27235249279809876 0.094157148330547558 0.53600988091512147 -1.1625641930841162 1.0424322911155475 -0.36960882026481012 -0.32738746569922206 -0.51139314807830993 -0.17158057669955348 -0.78092581203705413 -0.39473680358499763 0.084659242767313084 -0.31277713473685342 1.8841601692283014 0.046093644064607323 1.0274734194214068 -1.7986267969745917 0.40560161120240312 -0.39254333111860829 -2.9137294114945531 0.015420426839961763 -0.26828478590261634 0.65196421808389038 0.022331813777145097 -0.89063072832569601 0.52307103860568849 1.1182963988739401;-0.12642523081262083 0.90076719614736456 -0.10540345155492009 0.017014548933670513 0.007756232258794067 2.3664526061886249 -0.3984056186352084 -0.49212541385295061 0.75914781900523631 5.2945167682173775 -0.73724465072542011 -1.8594197396850414 1.0839185894733219 0.6171361130489178 2.0922638316547211 0.69649931380381136 5.6110764692763633 1.8586498498382968 -1.4315766576892766 -0.90771749721276618 -5.2540782568841049 1.0756730390914844 -1.6168588541459517 -2.7857615936898017 -1.1833939210492983 6.1462955965063815 -1.5370254381410213 -0.024506166168522765 -0.67324914276947656 -1.8937900418849321 -0.91346678222569599 -1.6849476652842923 0.50390450760561312 0.61520971988318895 1.324521010824957 -1.1493779935590573 0.51659860165548865 -0.11098905596630017 -1.5443768872104922 -1.752849051473919 -2.0063071259664054 0.6874215649188542 0.73360616788671518 0.1578881706888951 0.75830979690209965 0.62106495923170968 -0.14524667059621316 -0.69421075813749866 4.555422328275192 -1.2266634953313162];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.0514097468891074;2.3082151012342;0.668645916432596];
y1_step1.xoffset = [-19.4515643532935;-0.433235186558349;-1.49555987021541];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = removeconstantrows_apply(x1,x1_step1);
xp1 = mapminmax_apply(xp1,x1_step2);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
