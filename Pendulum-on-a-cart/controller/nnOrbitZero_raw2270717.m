function [y1] = nnOrbitZero_raw2270717(x1)
%NNORBITZERO_RAW2270717 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 27-Jul-2017 17:19:53.
% 
% [y1] = nnOrbitZero_raw2270717(x1) takes these arguments:
%   x = 4xQ matrix, input #1
% and returns:
%   y = 3xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3];
x1_step2.xoffset = [-1.24681331507932;-1.17092928306808;0];
x1_step2.gain = [0.515807586550311;0.712755856335142;1.00250626566416];
x1_step2.ymin = -1;

% Layer 1
b1 = [-3.5804150872882601;-5.4683417924876574;3.9855119598490529;3.7954359522968537;4.1676075004501731;-3.528432371601447;-4.1132383130092558;3.6570907937809065;-3.6885141195214306;2.4442114532841561;-3.8205205321706766;-3.1564941543450575;2.9112539388907859;-2.218923426564424;-3.0984609135358361;1.8970490144081631;-0.36807528855893845;-3.7398450365815012;2.1886784881305488;1.0026700060111366;1.6134294687363453;-0.51805866075822649;-0.89091053462860381;0.27913451389989102;1.4575298169591946;-0.58810974223962775;0.73354490492609037;1.3885898225887661;-1.0327265006968236;-1.6477180211636742;-2.0380761845818363;0.025289232216442525;-0.48799233858716412;-1.6752454792990843;-1.3510910334047086;2.5351629166053562;-1.8926464573414636;-2.559834794456914;1.5707704012236696;1.9029037596444316;3.4573291074691341;-4.0367447602400954;2.0933301736870478;3.1492869320081343;-6.2001779418444949;-8.6992966886515326;-4.8665849870221303;4.4735279830643684;6.4675806660997832;9.5540304113276342];
IW1_1 = [2.0544810819184223 4.5412135106158145 -2.9546475380713106;0.73265926245543311 4.9683523746664795 0.91204686873712137;-0.68090593386508547 1.1523213443471922 -2.3754179323967981;-1.1460086941947076 3.5631970360954011 0.86220374337053207;0.36915310342760788 -1.1640892437341253 3.5014791824216438;0.99765927263182741 -2.6377847374167929 2.6997254036977041;0.53147304986009702 3.9196178552884398 -2.3684080090309521;0.65254619116111745 -2.3019715458502068 3.4273970452861997;2.0170568571845302 -2.3320607062323857 2.4801863407333262;-0.79933203464006508 -3.7002941040713577 -0.74193988852063286;3.4722460224932616 1.4421649952530624 -0.63036662711545588;5.2277041105788031 -0.90011800444206225 -2.4278643616684477;-2.3756886237211505 -0.99482410948270306 -4.3463129368073306;0.98222006102564685 -2.3920293821095862 0.88690379271595865;3.4730987973763687 0.67139559664826387 -2.7178373790511672;-1.2107983859822051 -4.3414216620045272 1.7563120283673137;-0.032308042533184651 -0.011196409517063601 -1.9348623772423161;0.44930800943411364 -1.2633649804171043 -3.6143046390274396;-3.5672532336948901 1.2345618987133786 -2.0011554953074757;-0.48363880030629769 1.7403479126182704 -0.023899463883753084;-1.1580105414376791 -5.1295673996916404 -0.99243784829947801;-0.0058195321792834341 -0.029899234138415283 2.2937212523491222;2.4657021647034481 -3.4417785916244688 -2.4327320759099558;-0.67721778987777403 -1.7177324478965392 -0.30561458095071553;-0.37161524880884489 1.0167509306015923 2.1703170837251049;-4.4444329154194868 2.3294769349785924 0.25298249210258139;-3.4341554761287045 -1.7207221351371849 0.85900500132904234;1.0844879230557862 -3.8229147665054608 2.2423675469812983;-1.0037335682628428 4.4082498086154844 0.83878888695627074;-0.53434550724551344 1.8962531291750193 -1.8618118891928901;-3.2772912813973165 2.0401786167202505 0.29742599909403994;1.6601503916902718 -5.0297604603701256 -0.75426659254461093;-0.47797737861665351 1.6219447718983024 1.3128354674424372;0.098856180842010449 0.03175558043399776 -2.431527708828098;-4.7564383666849359 -2.2667737192126012 0.35842044675953855;0.44875071521707738 -0.28201077228874749 1.684210144622863;-0.16278724992991411 1.3574453472644787 2.9619331597200373;-1.0342438814332351 -2.2101000002508582 0.87737308318393226;0.96443429516022172 -3.5694944648045626 -1.5415060842284258;0.84892063598263756 1.8319238862816916 -0.79878836100126427;1.7669143406058081 2.4285503068856418 3.3460182512779442;-2.1835997205145934 -4.1322299710327242 1.0388565989262486;0.23452405002683394 -1.7167852475763978 -2.8667679708231715;0.19503097454827728 -0.34375007677707053 -4.2544541279269898;0.37637675863339742 0.67614344214358668 6.2309056565646959;0.082056960861350392 -1.1491612289146926 6.565838086112219;-1.1330437571694225 -1.9706607001384451 3.7106547669417975;4.2043414610616701 -2.4228962226661395 -3.1169418137596403;3.3532415514681841 0.38181640940832884 -1.2593347166179265;0.29576431603691911 -0.87583437425621558 7.970062933964889];

% Layer 2
b2 = [-3.385874526685329;0.41293621031883043;1.7488506260418122];
LW2_1 = [0.0041287467341330321 -0.16906028349292437 0.42735037810948701 -0.098179036978054815 0.55692700258485761 0.079564837394710472 0.026625253211214481 0.069004599296267732 0.038792385582768894 0.04883318385355731 -0.0050083273791286034 -0.00087634716271488462 0.0018780965326705727 -0.30065228568816849 0.0064815839085664928 -0.0082574695436506574 1.2017186855310291 -0.2660216294836627 -0.0017630273033595516 -0.38408774544025043 0.0027543914303111089 -0.33661644269030311 -0.00050621510417324974 0.10448798255830513 0.32401405846921782 -0.001061325698555695 -0.0023235497081101576 0.018120652069119156 -0.016740656863385949 -0.13176022878981811 -0.0020808437744294296 0.0041889754360342783 0.22823596006257241 -0.6833451502921114 -0.0011254026448976253 -0.007562063565864429 -1.4052512935837271 -0.48195781924252473 0.034871470941424773 -0.37686368659863401 -0.006603615082209917 0.017579836759055802 -1.0869945333657458 -0.55310990916426384 2.4796771427784092 -4.6276770152620488 0.18334967715646025 0.0059302885798909345 -2.0142084156277664 1.8001253017473111;-0.0074408419838301312 0.34032237205067484 -0.11398813918824766 0.022663577133803677 0.22671075232637236 -0.088426650357737349 -0.074969204454585742 0.016669363236528335 -0.02739601619558037 -0.10586862724570553 0.044348498622046956 0.0017863321447416621 0.0044177821679082544 0.15631755624485602 -0.031624357501750883 0.020007088594352476 -0.96986732178568391 0.025829589798888802 -0.0069785152017082033 0.024753902774121119 -0.016353567033757638 0.60786918796138856 0.00140578888510301 -0.2185874711220433 0.2232482259992315 -0.0032334350432258489 0.0080094505347499852 0.011433774085176309 -0.0073971020849288313 -0.035972983663244994 -0.001283933095355646 0.0032912687548603829 0.035741345434259796 1.3999390045609463 0.0086485971981474959 -0.74879963584481091 0.75159143876235546 0.42222084198949683 -0.00098787993379557287 0.37617760148783747 0.034322493591882733 -0.013856774261640902 0.51933714176057633 0.54515375708038394 -0.8811431268369383 0.41203254174878506 -0.1967039542833853 -0.0042516159148068824 -0.021346144728340247 0.50254102039384041;0.002697031523136125 -0.32697559817026028 0.32964320071178216 -0.028248602340712442 -1.4724299333954833 0.020755381910688001 0.053726568455107156 -0.17939891317379053 -0.033099843098720848 0.086500444947106306 -0.058806398109581139 0.010348438977431408 -0.048458558937985251 0.24306187202984181 0.050168809074503565 0.00018116805626287822 -1.3754506065505547 0.71878612567291156 0.02476803055999521 0.97653459135741305 0.0039791196380648585 -0.87515456905731503 -0.0078025050465371452 0.19909722117602008 -0.98521849335051392 -0.0063786723937959231 -0.018836952842381439 -0.037255136376485677 0.05550616188720512 0.28902080378404471 -0.010151206704756645 -0.036077223100012261 -0.50449441047896504 -1.7440024111021861 -0.011927590321978853 1.9574139826133987 -1.6083863559775053 0.26674481342982348 -0.13183789634772625 -0.11507065906486957 -0.023962968121764489 -0.084354004472424179 -1.3001183643324001 0.41467842720096143 1.3680409157503486 -2.0592146564007141 0.25119191775553651 0.016818911313405373 0.52963879978552697 -4.3007627774105313];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.0731306448565522;2.45299278288691;0.708522435104391];
y1_step1.xoffset = [-15.7775411741982;-0.386851794344943;-1.62010167830795];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = removeconstantrows_apply(x1,x1_step1);
xp1 = mapminmax_apply(xp1,x1_step2);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
