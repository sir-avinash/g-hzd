function [y1] = nnEquZero_raw030817(x1)
%NNEQUZERO_RAW030817 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 03-Aug-2017 23:59:11.
% 
% [y1] = nnEquZero_raw030817(x1) takes these arguments:
%   x = 4xQ matrix, input #1
% and returns:
%   y = 1xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3];
x1_step2.xoffset = [-1.93551010702072;-1.47266851830126;0];
x1_step2.gain = [2.13787107695642;0.963874721483377;1.02564102564103];
x1_step2.ymin = -1;

% Layer 1
b1 = [-6.0892171426747259;4.8867786468247152;7.7802265650894338;10.018889695778263;12.439229829671683;3.4194500854189327;3.3636235598186346;6.8238125370785774;2.8312794029379282;-3.4497062931674973;5.5126536437523344;3.2874299261474338;-3.7346013184862858;3.7185535086835628;-2.1460491479408725;7.3488134469370587;2.2907032347553691;-0.71458147511475001;-2.5844499003995209;2.264901069876093;0.45579096562977295;0.99086944571066049;1.3585439840119822;1.4021658869026838;-0.59325544591810275;0.29508474514757377;1.6668729871938222;-0.13612854791951773;0.11793182031917263;-0.20376452401620004;-1.8384711546897849;2.7191941689446075;1.3212966777467845;1.0799778777145588;2.6045278126274209;-0.6443819138261514;5.1310280213962844;1.686525608101324;2.5457461495628428;-2.3990750064364241;-2.3365356576265897;-1.7922060816263257;4.3334008852812289;-4.2804029589769819;-6.6017830786609206;7.1270409079645969;-4.0515931065776245;-4.7555056591497937;8.8023540276694021;-6.4994373684465812];
IW1_1 = [1.7119883181099287 -4.2802949024306844 -1.0421055660314864;-1.7425433882499093 4.8335693880688995 -0.69013491801407245;-1.0101965584120469 1.7429065181792827 6.6406933061103395;-0.0567734901413086 -9.7044264261303539 2.1068942582952706;0.71257355329477545 0.15703858636470752 11.061240190961909;-1.4650578961625744 2.0128108752720397 -2.0801899980870653;-3.2231883505283765 2.6831040054699913 -3.9539053697602182;-1.2442003151570498 2.2356125089640204 5.0302691734556779;-1.0905998145657059 -4.4583640970891798 3.5379746008528619;1.1694221171469179 3.8378382023002011 -2.511656035526268;-0.059128495086106188 -1.6739623441056053 6.4546212075389215;0.92556373869842279 1.7320500226306488 3.1101903342489932;1.8384342178243369 2.1683725615213403 3.6551557708639377;1.120969945591713 2.153825301541171 3.4235025228706659;0.94922631049068906 3.4299238149826419 -2.5248797363767901;0.082450765647628821 -7.0051011009113315 0.18882938837810148;-1.1924257177517803 -1.0403828285649768 -2.3055066877826991;0.98597789637170841 -1.0015405368357062 2.6777240954899808;0.99100122448989247 0.030497896143539673 3.2842810483783511;0.32677051087960907 -3.1152804171881407 -3.0362272941904047;-0.97171596066913979 -4.5460153321379764 4.416424457162476;-1.0089197109191437 4.8343054279814153 1.2526657311669822;0.41048962879085821 2.9500511715188145 2.2109733637893765;0.45124148912662582 2.7246237364695318 2.3067828852750232;-2.5730693587691551 -0.065446910463532959 -0.39897657848828993;-1.3518383477970635 3.7557282181721656 -3.4867687052554719;0.60819117269322742 3.0625543654126091 -5.1877042199637584;0.65954118309161214 -2.0926127155122285 3.2389946537387191;1.0174755857411109 -2.2161907041253528 -2.9417530499401163;-1.0217142219487971 2.3314170131348506 2.7106395610280862;-2.5448812501575224 3.6765316003540796 -0.88443058439051425;2.7914776489361106 2.9907643208575476 -1.0684224317031108;-0.65135669204468716 -2.1430414834201579 1.0463952279332787;0.025322421318644161 -2.2318940767162094 -1.0085693767698249;0.85562627648665635 -1.7763184968186945 -2.2091757753715444;-1.0953309458966614 -2.230618580114085 0.35938442136836696;-0.18079849883154916 0.11471253821413421 -5.5691507826594879;2.4764744878140244 2.9228170535298466 -3.4818160242155738;1.7364027334787644 0.41094460001463584 1.8308563910441349;-2.0204456660745929 -0.54977946547651946 -1.3257883392629968;-2.7818473721407813 -3.9120400922478908 4.1078386893898982;-2.485343134375217 3.9954640150819865 1.4105806952904849;3.104894671350797 -0.86826551090244974 0.23878453555434745;-3.6122320577090359 3.7146407986450005 -1.0536612601973596;-0.631132646384573 5.6185707092191262 1.5554701961666961;1.4144227736008659 -0.86781728417076454 7.1970614011292087;-3.3464910416000579 3.5602758218615369 -1.1031023007199769;-2.2881867909896831 2.3287230968486807 -2.4774321721000776;0.57352880134941886 -6.577980315698623 -1.1292612575636869;-2.25724849683108 -3.6316468018578152 -2.9098307844594786];

% Layer 2
b2 = 0.52513746101393055;
LW2_1 = [1.1719871936722639 1.0178440642093647 0.40195012347846409 4.1404962507324763 -7.7483475799981951 0.70612241486517158 0.10976924817565011 -0.43888997402703261 -1.1667503817417779 -1.0404971629444664 -0.78372905836584894 1.1189173081084394 -0.030288372047211708 -0.5822358115128875 -2.8424879741097242 -2.0255188436659619 -0.49430204901628938 -1.4061581089414017 -0.32075258632443099 0.015413167545312644 -0.074763029091357708 -0.0032916641451177218 -0.38420022804995152 0.49050290703534871 0.048890105526849734 0.12604152173414351 -1.0623188523072993 1.0289840548549367 -0.49403166653842584 -0.52677769715313905 0.013480177872408345 0.17063484714626723 -2.6240342576834119 0.18812768471986588 0.29980510694032558 0.29359466822308938 0.64475264801349963 -1.7892776165896995 1.0476198853723295 0.92825885186457591 -1.5816613064170768 0.0102070537639479 -1.5368481684688526 -0.19673988219952451 -0.53662077845588108 0.81294583907605467 0.25152716841998002 -0.55286798354642075 3.820877235082567 -0.16681144418080346];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.89794844088458;
y1_step1.xoffset = -0.776706869841167;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = removeconstantrows_apply(x1,x1_step1);
xp1 = mapminmax_apply(xp1,x1_step2);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
