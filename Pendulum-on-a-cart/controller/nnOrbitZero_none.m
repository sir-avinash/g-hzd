function [y1] = nnOrbitZero_none(x1)
%NNORBITZERO_NONE neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 26-Jul-2017 13:44:40.
% 
% [y1] = nnOrbitZero_none(x1) takes these arguments:
%   x = 4xQ matrix, input #1
% and returns:
%   y = 3xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3];
x1_step2.xoffset = [-2.3844406503916;-2;0];
x1_step2.gain = [0.419385569456623;0.5;1];
x1_step2.ymin = -1;

% Layer 1
b1 = [1.9236466201605087;-1.0990012091971784;2.6689392127685454;-3.8783068210221412;0.71188365498369577;-1.2594602962669146;-5.2482535640157471;1.3704528484833414;-0.70984562742995483;0.014668949107291626;-1.1177019810751132;-0.6282850347805996;7.8324325726185116;10.238993879282399;1.5015521498371716;-3.6316563196012077;-0.012208366952469048;1.3051235279378735;-0.14126539763675239;-10.332183659681885;-2.9111183221224759;-0.94256238985610541;11.261600949412468;3.1281635350864772;0.40113095084584721;-1.3494693995962115;-2.8573743717907014;-6.6028001576225126;-0.93055466356034156;0.13839419281923188;9.526068210772987;-0.54810686294289623;-0.32372204522816039;-1.1380846661817341;-0.11159493817076406;-0.15382517383506022;-11.456911967036927;7.8506776565202587;0.45036817207959079;2.2455056933629023;-9.3637979625980883;-0.18967804798834736;-5.4925069719687158;-6.4360337074315908;-0.93069736245260914;1.0513875483205724;-0.3909862641974115;-1.11864115587192;1.1562665550815381;-1.785406307215732];
IW1_1 = [0.51959447399332448 0.78047428099202965 0.097991534327806912;-0.30461588644751447 -0.73215372991619021 2.2836887716574106;-0.34949180316229461 -0.28089350287948012 -1.7815415194933089;-0.15982903073248619 -0.23339100609756863 4.1496301826535582;0.26938660905881695 0.022763906268779607 0.27540221096032719;0.13740549699702778 0.29962586618332032 -2.0728056473296999;0.31405062845303711 0.63134271745403503 4.6880397936965519;0.51759573135412751 0.79327751502128152 -0.88368965229503593;-0.14190411342145226 -0.65020854111705895 -0.036711055479542433;-0.21753862494376935 -0.49563877835936415 1.3135403788716715;-0.26477004334614107 -0.49799767685235152 1.4253292270589693;-0.014660701802878866 -0.21300652836777739 1.421811953307341;0.0086261615486487968 0.025110628987113904 9.2604504225733066;0.054134936491681655 0.12675107832393553 11.071632901240649;-0.082562770174757036 0.033186708828711928 -1.5252900742841897;0.149040856132859 0.22309743697205695 3.8319713310563559;-0.3900511777461505 -0.57795185585874387 0.16768284517864762;-0.13967471585583946 -0.28829599265243272 2.205666735437064;0.091006495776200291 0.27850626785292876 1.0246983732549935;0.054780287511017961 0.12865609718209112 -11.156892672322053;0.058636618673837758 0.1351265788197743 -3.412741515003499;0.37696296678478175 -0.30222496568645124 1.3397052081264218;-0.21895732910643581 -0.32936245305466982 -11.924924752883118;0.17150711024557405 0.026738915017884359 -2.5164020169475849;-0.29871546628372453 -0.94669919046864537 0.031050287122712371;0.47912207448789484 0.83909818700197025 0.53738915493474271;-0.055629121831988981 -0.12269889717672235 -3.3604485788759462;0.044255130293473548 0.10345888115635204 -6.7776957895473009;-0.15754918706586382 -0.16096903627154083 -1.2712094241947816;-0.36259420510998214 -0.41887477582932575 -0.52831478006994825;0.1961095944496408 0.28274213056381792 -9.7447281626868527;0.70513732342287283 0.76549746245658556 0.15194805101978995;-0.27841157790187082 0.073707970777040444 -0.48038834578544515;-0.22704210079536521 -0.51124961186112139 1.9684403409908597;-0.2441133727895671 -0.31281901856977568 -0.31049709293848132;0.15919017365338733 0.47054975543494543 0.63991143468751166;-0.2138527704022708 -0.31308442132511938 12.114799864884334;-0.012426440046774701 -0.025646963675647314 9.2739160633101552;0.27074949947912691 0.71672207811218802 -0.50812412605759427;-0.23339945431710166 -0.92282969288968886 0.35991246755932582;0.19976438179471265 0.30286336970795774 9.5850788655681693;-0.20171351454353104 -0.19138110467428196 0.44416656122208487;-0.23968709354955542 -0.30013555598751734 4.8744316340358091;-0.044733093864617678 -0.1013933292062752 -6.578017151954092;-0.29525120054476339 -0.33890515529592519 -0.81050816224191824;0.19061167523974365 -0.14615681476351036 0.62539448894375782;-0.53078492914086739 -0.64565464395642236 0.5076066781096531;-0.11309124799430324 -0.242376970451437 -1.8444705185126218;0.12819011385717977 0.2154789155295625 2.0271033223166026;0.12019423541725355 0.79376132420811885 -0.25679499304227166];

% Layer 2
b2 = [-0.13958556864847374;0.73689572965664796;-0.12869254913852377];
LW2_1 = [-0.37346827370673968 -0.24165985763002312 3.4644290435336016 -4.1180865116205503 -0.3431838453409331 2.455124683429629 -1.7652938588760081 -1.5614100857977384 0.5797996058190289 -0.46882247286328632 -3.5354427997313378 0.68538436100614375 -2.7481427920913961 -2.1565024606153611 -0.25445844960372999 4.7460525606002122 0.82106513876852538 1.8929144705975145 2.100385232264971 -2.3309045354008879 1.1546427811718287 -0.063223340462225899 2.5374769893501004 -2.4560724303082133 0.10430705313657641 -1.1197839857019076 -0.99860078952424003 10.381872960621314 -1.5390182718488861 0.25015193143826164 7.7761054409092631 -0.14292876222205844 -0.14244954290263998 1.7015469142291737 0.7632789396013514 -1.3954047761842499 2.6454942688439633 2.817893751012285 -0.2287912637436306 -1.1086300262338162 7.3806338609317637 -2.858770907592302 2.7409738215660333 -10.439429737120065 0.68747131233409831 0.050456099460606592 0.52451769627971989 -1.8033999930914508 -1.4440039903367605 -0.94951561432250142;-0.35594455037748035 -0.061637501328747561 1.1181586181280052 1.4319685694561501 -0.34198822124955314 -0.54848836566032733 0.69945180963138043 1.0015509710014427 0.48659570414187198 -0.82539935931251218 1.921375714522952 0.31220014130723189 -0.4845191938195868 0.037695386346120234 -2.4427557008144327 -2.4682013175757889 -0.52825103104736626 -0.71355157297352478 1.0871678583132658 0.083515994923028594 -0.67801210443591398 -0.2385552740779866 -0.30707209584989209 1.2245290039189656 0.12173199625226511 0.5310281488045776 0.4975573832546038 -1.3235118929983634 1.4547820518577308 -0.004486540755568473 -0.12452923533424952 0.10133990772062469 0.30514616208870809 -1.793935642456812 -0.085730345959474596 0.59936367420306014 -0.079101606789972287 0.47848418372181678 0.047692046314564356 0.36036063388074757 -0.78517774217987224 -0.21433886656947915 1.4875897336843653 1.2610962352177078 -0.24634168824092806 0.14911029999816375 -0.097862954729309476 0.76286755943999029 1.4829273689051277 -0.3747925608051802;-1.6024755966072264 -1.1505223452258757 0.80401844986980264 1.1503654516060045 -1.198258099205479 1.2535156835915802 3.9277478979356486 0.82801929363205196 1.3462189853391602 -3.1327766560620036 -0.27661164260357829 1.0197555928470752 2.0839752202122668 0.59028898173348598 0.98751230740329965 -1.9090538822423162 0.04217394832859369 -1.2660577449456365 3.5129735510061386 0.53883560990442936 6.6320748064311106 -0.061804680729541726 0.68574248484690392 -1.6740402614107213 1.0222208990242223 -0.88930347074805594 -6.7425144440765781 1.3582947034530168 1.3618871469978979 0.88457584154263713 1.2278242653710236 0.0072382627865199192 -0.3706454174398422 1.0946440364513568 0.50262542618328809 0.83734890964967779 0.72395640335216971 -2.0837809143989245 -1.9347197937531277 1.5293245366416985 1.0639815851288548 -0.54882684476395394 -3.4569531007706895 -1.4223764378027761 0.94535988701319151 1.0765256092377815 0.13321638381503756 -2.313528076997188 1.2285615676304216 -0.87200997977275596];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.180961323306447;4.52511094062482;1.75427169008349];
y1_step1.xoffset = [-5.52604270198975;-0.220989057090812;-0.570037130310418];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = removeconstantrows_apply(x1,x1_step1);
xp1 = mapminmax_apply(xp1,x1_step2);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
