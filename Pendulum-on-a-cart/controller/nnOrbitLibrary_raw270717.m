function [y1] = nnOrbitLibrary_raw270717(x1)
%NNORBITLIBRARY_RAW270717 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 27-Jul-2017 17:59:18.
% 
% [y1] = nnOrbitLibrary_raw270717(x1) takes these arguments:
%   x = 4xQ matrix, input #1
% and returns:
%   y = 3xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-2.62995485035448;-1.63445960217738;0;-2];
x1_step1.gain = [0.38023466443358;0.611823013959983;1.00250626566416;0.5];
x1_step1.ymin = -1;

% Layer 1
b1 = [6.6190254601140186;-4.2586837470807231;-2.356229978273352;-3.5555571962915571;-5.9258053126130816;3.6342001021746215;-4.1321976777635525;-1.9487598995286808;2.2348329865405208;2.1470040449645942;0.034909508346647071;3.9833330653873116;4.0766501426345014;2.2509751009475978;-0.83577615666673943;-1.2252406161499245;2.7158833833637894;3.5091715781006045;2.5391816239059515;2.4399692902491097;0.97545119200624109;0.68388030965084257;-4.5626912520572418;-0.34324380427203799;0.70007058512125353;-0.83203516295566593;0.0024286894211736896;0.21744821371695541;-0.20835742803866075;-1.3934659138268524;-1.1624273588892535;-1.692440798102169;2.8801477346473803;-3.2146957489454944;0.16139710892508358;-1.3484623105783613;-2.409322588991452;-3.4604438285458912;-13.875796063855139;3.4135826426454043;2.8615346367041581;-1.7079266533335369;5.5999607655016517;4.3013256037115024;6.1699404421115469;0.28598107885134877;-17.895624746584872;-2.3637753441487024;10.377470086039807;-8.3922464671941714];
IW1_1 = [0.052027733354604089 -0.058723027289375881 3.4531841166945214 7.7494222570984936;0.14573224046369168 0.30476815363300636 -0.026178893107240656 -2.8418760616013405;0.044298827397972487 0.20363715119842599 2.7188181904320561 -0.12252352187509738;-0.02011813936960595 0.076553267102245887 -2.9286530290383688 -0.09860818674031821;0.38413124405338434 0.56480972664811757 5.17131401095354 -0.80648581560636412;-0.001206602556744551 0.057977561991794692 -1.8380541797897303 -3.3307411527510662;-0.41026388144129156 -0.54777613456265362 4.0188484269340972 0.61615947422758266;0.13891700256589062 0.15526092131034036 2.3029022913624311 -0.44351434820014313;-0.009567099619918161 -0.0041374495222807148 0.30040780752162632 -3.2591303966170653;-0.092564634681397376 -0.16784888165200265 -2.6800864813805307 0.18978908018301294;0.0070699652768148958 0.15697559672266576 0.21907513091993669 0.15821307897352885;0.020866249942761428 -0.19560263549785858 -2.9693399745909179 0.049984197412407519;0.11683299975105771 0.32823610458729141 -4.0510962111322302 -0.30529631630724763;-0.20484714028481091 -0.35518616791382668 -0.81702136787282797 -1.5670739399090463;0.0036057001675024554 0.055530639907915944 -1.7629145485406681 -0.69304605779413053;-0.019711180856332486 -0.0614774624475296 -1.6089618925871807 0.010643858230857573;0.0046800045280352325 0.45018024237851612 2.2514947031874115 0.23208128528861779;-0.066644565783921819 0.032473178169143781 2.6432885135168416 -0.0016409632893136703;-0.031056046082200726 0.10610682424602584 1.4922983775864058 -0.47660074572419892;0.11556817636515399 -0.24444518647719327 0.79929188677134144 0.24031787394838483;-0.007432162602797345 -0.043504576495450767 1.3509994714113738 -0.57739810025658367;-0.017972950351909638 -0.098502769792785369 -1.640323666234214 0.19664591938791873;-0.47693168233484962 -0.74164594363455449 4.5082817723770461 0.75022332682263482;0.030953994819561667 -0.2307326316820166 -0.69007721061863225 0.37662815154580492;-0.0073147342469094424 -0.045856279585913914 1.1106037850283588 0.66943868536248563;-0.013148863656402781 -0.079448015633787894 1.3569402917764717 0.2950034175262265;-0.019017810081063607 -0.04027211548578942 1.7875038212477659 -7.2592035221713758;0.03093584445102204 0.086672784740644646 1.5214072714634961 -0.058310538637401807;0.0045725219526366271 -0.05758142981324358 -1.093721639806454 0.18475008091471432;-0.0023817089819433827 0.13446008350879024 -3.0529604836638562 3.7011583768051084;-0.078314428595119709 -0.12483034262106855 1.5382003714956736 0.60165893190161801;0.0076566919781314727 0.047627502310820719 -2.2063839876561882 5.1167797713849765;-0.0047652542460756451 0.03588466536724156 -1.1034634490179069 -3.8509306543757558;-0.12694380749181519 -0.18177032564130954 3.200792925269758 0.25673105752057052;0.019980535521878503 0.02021375433695486 -1.2514289802490042 -2.1178302577059851;-0.028471885643957067 0.13906965912864361 -2.751319006511534 -3.4624659709053991;-0.06650533793339343 0.29533980149209854 -1.6652752211949668 0.21575692301226573;0.14645220392147648 -0.17087578150220337 -1.8747582126255518 0.1823320789674108;-0.20277965083807331 -1.2664352032417758 12.110314353142817 0.63910269973327671;0.025055620837579812 0.11633808629779271 3.3281271579416565 -0.02457980400848564;-0.10377745826657125 0.11961525177064276 -2.3103630331632354 -0.91134453990402642;-0.0063501741963384031 0.031434444815292645 -1.9243268863831706 -0.28044047207313794;0.019728066154963184 0.030584772994343697 -1.9992648889495024 6.983085183441557;0.033086746194469954 -0.17725626176851342 2.2035639475805273 0.86018838721118562;-0.15809237299804246 -0.51295529616346835 -3.5487768001329387 6.5231427328713814;0.03285453879030948 0.13657524750648939 1.8503358796348275 -0.045845391577036945;0.34722288811522317 1.9002047542936553 16.20768293106374 -0.9583397134437992;-0.032392210728249653 0.046213112273031293 1.6657863244987523 -0.98681442936004204;0.065112187705492097 -0.25332072487284757 8.7591044268544724 0.12413467942394196;0.036629276982723204 -0.18705519107320068 -6.8300006736575076 0.097654816489188806];

% Layer 2
b2 = [4.8390215320526764;-0.57778858178269377;-3.5382276831732318];
LW2_1 = [-0.077779840557173172 -0.025538482023141684 -1.426986968843996 -10.09599445850635 0.48590771327451854 1.9455120661558551 -4.2593882259538072 1.1077021260044908 1.9080521892206073 2.445160016204154 5.9104998547752237 -7.7116924137979384 5.6219099339659389 -0.017802593084355587 -1.0993989614972717 8.9830527013556818 0.70724101698478192 -6.6804618223364471 -2.7204607045221669 0.92387247827375973 4.6602844972972601 5.3238488511226798 2.8263265157880091 -0.038875717747383833 2.1877409368337415 8.5862569049835198 1.009179686642832 2.907776973807302 1.180150931700765 0.17260356734214163 -1.0752211606262791 0.73860256686187076 -1.9201844220798621 7.024362574358781 1.7564975302658312 -0.13440138873769333 1.5390925373438318 -3.399122265285333 -9.3992024213952092 -2.8036638535706944 -1.0011830085668028 -3.9540175306349021 -1.1862689775382977 -2.6798022921197058 0.0076170965872558857 -3.2265940386673839 4.1180186238428949 -1.8701900260698572 4.3336245220670575 8.4313512849300718;0.07224470815767825 -0.24891491131644095 -2.4247611048295425 3.1420127979018222 -0.41235635314081343 -1.4897247804750653 2.1610653047116384 -1.4472279443230052 -1.6693181778860993 -5.2030505057348106 -3.1214136488895372 0.44581024468825831 -3.4508288244483873 0.49389429123229267 0.47430833468985867 -7.2655330609296307 -0.63955486732893441 5.8868392508799428 3.5439565529076682 -2.7274517895712393 -3.5600822456245411 -4.9388088289977059 -1.5044460537075179 -0.45645226644153725 -2.2855420212845927 -7.7364986378730913 -0.79346750200026916 3.8035889148655393 3.9777343055235646 -0.10375333300257253 0.3048246858572497 -0.58819692343787489 1.5261891535555072 -3.8238085064658489 -1.3293584538685486 0.089667599846753904 -1.6572861832109695 2.1689284789152867 -0.63984602449042116 0.45721905548770664 0.47575151639745517 3.5394702236127915 0.89842793299069557 0.20126234369162829 -0.023156124990256176 0.078578491844662035 0.80576172286943748 1.3364450251176365 3.8968489297112394 5.6219638146763975;0.054523323030131493 -0.13387287571682949 -7.7812437024032022 9.6207091498302333 0.26578601951382547 -0.70766710498736773 -1.5753263747839841 -1.84380118501834 -0.678942371325431 -5.8156199202527379 -0.87329554209972005 -3.0748982269948328 2.8195361295984558 -0.040822061625961394 -1.1502115025033861 1.0985810745822471 -0.69569589490713635 -3.4969207610797337 -3.7524793860435999 5.5907441057592173 -3.0543933874596316 0.95246318780373529 0.68941830145698157 1.7536537839915334 -4.0377837227840914 -1.2636487289285319 -0.37752581467846213 -3.5334590098014194 -12.266197532668778 -0.0075119324906343533 0.15267369566012173 -0.340299525323006 0.94649694935342543 7.1195161629725572 -0.50325832503399637 0.0054206560051509797 0.43776746975529385 -0.52338203017024143 -7.2410327181640781 5.0621571119178723 0.1544572474585944 -2.2418889027810396 0.50891383796608303 -0.55658356986095381 -0.09946597996256383 -0.52029656200499874 3.6956599256042955 0.54745665975900737 -10.660261374696955 -21.50962059639205];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.0633812321551945;2.33498649712502;0.61724520959969];
y1_step1.xoffset = [-15.7775411741982;-0.428268001220248;-1.62010167830795];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
