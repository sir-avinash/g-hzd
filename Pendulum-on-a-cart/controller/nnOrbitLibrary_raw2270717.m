function [y1] = nnOrbitLibrary_raw2270717(x1)
%NNORBITLIBRARY_RAW2270717 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 27-Jul-2017 18:12:55.
% 
% [y1] = nnOrbitLibrary_raw2270717(x1) takes these arguments:
%   x = 4xQ matrix, input #1
% and returns:
%   y = 3xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-2.26386609775547;-1.62340701346445;0;-2];
x1_step1.gain = [0.441722238338856;0.615988468514705;1.02564102564103;0.5];
x1_step1.ymin = -1;

% Layer 1
b1 = [5.7067562352179344;-7.26288745916293;-6.181225544786054;6.6864738397904633;4.3037876573693277;-2.3081538455710988;5.0234992805493119;3.3936437017258307;7.4567601525331018;4.5741395156470785;-9.6480797900805264;8.9611249214090094;0.83485192148300236;-0.67378242871758387;3.5265939182262946;-0.80680262817465753;2.734186710339495;4.2101618598262425;-0.61689445409018695;0.3787751075694672;0.88691747206730764;0.61578734205557051;-0.36944868577581763;-0.84700846932543628;0.87905580511188575;0.47239738779240087;0.085619214727927995;-0.83062129205634183;1.3714492944131118;-0.17598269960314353;0.21545409601230528;-0.20413158046706237;1.5174006724408284;0.46799932131866417;0.69150787013343618;-0.76900077132906386;-1.3925888233154213;-0.74217834040323838;1.3556866244430739;4.5396533079222436;-5.9181778282329534;8.4880534230673792;1.3886825735204935;-2.9137596812718876;-5.3838798404708692;-0.85790219571753845;5.7057686253513697;1.7718059910437247;-0.78289050260788562;-9.1925413169369641];
IW1_1 = [0.085854093819550392 0.23598655397164059 -5.3089801498242277 -0.23513648255939892;-0.19965898226513842 -1.2637156330759547 6.9180671528340039 0.6851627912177749;-0.09066205206633958 0.04805690903219096 -5.7111112294971145 -0.057359716929591749;0.17386419107351586 -0.096823762110253606 0.20073812987058026 8.4192264957127652;-0.041940613624788688 1.188048657724373 -3.0173382989177955 0.13048795637342187;-0.10093372476229412 -0.0097838573043322885 -1.8828271441456053 0.016722477097850564;0.01092569661984855 1.06524993016225 -4.024967899728674 -0.036119853007405209;-0.010550710237033443 -0.067171127296125455 2.5137661292159779 1.6589485300680304;-0.10567777558863312 -1.1326824695805275 -7.3543314213511799 0.59016191172140497;-0.064068526009988719 -0.64242851852279914 -4.9269006651663982 0.3183218382831341;0.02468828048699729 -0.052186408242299857 -10.017883758827534 0.025281719844088557;-0.023243432693718202 0.035802044561368832 9.1183734171260049 -0.015596005845578227;-0.026364558238189183 0.15532966610892707 1.5249549339878867 0.0016634619494334884;-0.052210816715494497 -0.078445238801383418 -0.54302018374046657 0.9075591122331188;0.061983091934603121 0.34960542473322337 -3.2282235609738947 -0.26802375270530804;0.033410606784459243 -0.33896712040797028 -1.4220311154065437 -0.16106975971253462;-0.11413801028038181 -0.063845030276911019 -3.4289454640294443 0.12472759608947623;0.16517867422459701 0.72958678696154566 -3.3045835320315113 -0.80327610762419066;0.14333655396543149 0.42450161376449175 1.8397234672512954 -0.54863184257825903;-0.0052605719182640016 -0.04938090389455739 0.93889489393822989 -0.5130514225207996;-0.069444052758058081 -0.085441103304262384 -1.3084731803728293 0.37371275566958506;-0.0047869880600843835 0.037888807350165296 1.1675215041515687 0.19732252983177687;-0.018158694217107491 -0.038018045771071693 -0.20537696227844038 0.3833926306179648;0.0047910841781518996 -0.024282885177432611 0.35500447751605174 0.85634432692307616;-0.0087823424020332524 0.0066714136695188503 1.9559245473367208 0.0053388814111129225;-0.08998196721545855 -0.18916471167407312 -2.2026654060812163 0.65322936956280397;-0.0046204093727683178 -0.014274550196885297 1.4469692786709905 -0.2867852454431436;0.033831641523543766 -0.16544557676109173 0.11284668151520756 -0.37424013821291285;0.033068884131591522 0.25204487780905471 -1.537220877083779 -0.20898271027237975;0.0040253210370950632 0.064322066066055936 -1.4018559950924057 -0.40441659512494782;-0.013519220328636764 -0.1277229457422725 1.5291823296097384 0.54261585873299645;-0.026495391028818285 -0.002360150751907215 -1.849828814042592 0.20285106538927761;0.041236260495093824 -0.025954640812535092 1.9830020532696297 0.01973262354418814;0.0029380466560910653 -0.014879416095452345 0.24025751062775086 1.885422703152801;-0.14160555407530745 -0.42651605704354517 -1.548955901274502 0.49176066085256165;0.11610342354230627 0.31457053581815286 1.2375316324982608 -0.44768339314266736;-0.02161110743082512 0.70777752749811162 1.2652756659511677 -0.073480728474734941;0.014886331637338802 0.11246226638199631 -1.2925387982108585 0.27663077877850473;0.010818253154135369 -0.65455052204977582 -0.91918816420296856 -0.0664622353513033;-0.033415450277571798 -0.48494916140821798 -4.168044423257772 0.22645744407988161;-0.004484343338918311 -0.15168428050366017 -5.0287293273124529 0.077345632703920406;0.02248285779745296 -0.041403434965658625 8.5672053157336823 0.023863712106097733;0.035159566645306388 0.25969228314719406 -1.4458010667630734 -0.40460313916393936;0.063227610232327119 0.14737993852460923 3.2610375000032796 -0.15361747543579066;0.046244604531107819 0.19991418069480155 -4.1492464650593694 -0.099075171246423746;0.037574323486407983 -0.37436410352038407 -1.5383824156673132 0.21605755560680645;0.091464278663056939 0.83945131475437873 -4.8299334145298545 -0.34449956113662639;0.0088088077428235198 0.088671133454292825 1.1500225056633535 -0.32698978719026445;0.01238511636378419 -0.34744524355653245 1.9024258225003334 1.4070105317679802;-0.030523418627044132 0.060191346169473442 -9.5258401653450377 -0.03088546126002634];

% Layer 2
b2 = [0.30277513661281508;-3.723078084558245;1.9074169996638908];
LW2_1 = [6.8102068976672321 3.5947013442251099 0.91609703919991881 0.29939518616762512 1.9315399992068591 -1.2586522088932879 -3.9343071123307216 0.11186192084739441 2.183953983555126 2.4848841804278274 -3.6364728561479738 -7.7516121540888721 8.132840205232986 0.12693005392475959 -5.8119662824602232 2.1914281499795898 0.29276277756403196 1.5101718068641246 2.8323457344259766 -4.5137240864472998 6.3933153290069562 -0.28409441186338447 -6.2743967970728471 2.9717416005527268 -3.9399371365507956 0.87738504964023911 5.090373372100971 3.2075651260639555 -6.9499007915204629 0.72042592508188708 -0.38031544769921899 3.0337261324846092 -2.9770956564769104 0.8314863895449438 5.717847270034647 6.9018811706712118 1.611244916313785 -6.0862788393807277 2.8758355135377296 -15.340487600402783 1.6699915950643112 8.3956589181353412 5.3268475317316346 -2.2848432819617588 -1.3135085750517539 0.44144032863690874 14.122673330749038 -5.211759194524797 -0.040574169912752568 3.2595468508683751;-5.9548578568049466 -2.3615790208246001 -1.9136848376160966 -0.10343623502356329 0.13549035082848793 2.7816019857228436 0.01697813198540031 -0.013119913973079529 -0.919735682137509 -0.6836395486204937 -1.2642940712322617 -1.2019203788493433 -6.7879788172419078 0.48388654167190787 2.0220050216365846 -1.3152483652560925 -0.69783741047095749 -1.6291707283072403 -1.753371850158002 1.3398916297937573 -1.60296261156825 5.4533599255639853 -4.2910118849335541 -0.25014028044565234 1.9305499902780481 -0.59086030903707909 -2.61680007313428 -1.2894008911627075 5.3583725665278301 -1.7245784179505526 -0.46647542656286523 -0.25840297974995619 1.4061168626659433 -0.21610746178728693 -2.507262663606443 -1.5219065903347522 -0.90328189949537785 4.1097291488818319 -1.4522258264892596 7.6575239158517805 3.5481972132513793 0.4926706825952698 -3.1631794342472443 0.640798764864841 -4.7375349163785696 -0.50998699205267084 -3.0029160502364634 2.5293120488238636 -0.020323025650564847 0.99374434025613434;2.4400674592725862 1.3709344904742884 8.7788991160887679 0.058646866739432021 -0.69680790009301952 -5.5237081175900622 0.046140252759000668 0.022776939857472207 1.7538608258978698 1.2717376271320882 2.9946989922656559 1.7598688448366111 -1.6312983490897195 -0.49825480746892781 -8.7258441904674413 -0.023789554732937587 -2.1274466556757998 1.8043368956783503 1.6156453037111178 -1.4106045761908765 1.5747960527267317 4.5314275047489323 2.902790637382441 -0.16382721760115479 0.53542679654642655 0.54905783836279354 6.6857261744192336 1.5147171248706017 0.28690583536769065 7.3468182541633862 2.9253939377715859 2.3425613021710876 -2.2424253174481503 0.093495951502534216 1.7664332742383477 1.1995999735421212 1.0766388933991207 -0.080878789961444 1.7607003248654878 -8.6685925750616857 -13.772750465208114 0.34076407183122598 -0.21342395144813675 -5.9421794956398468 10.826543936450596 -0.24090208262924651 8.2945190778815405 -1.897679337158628 0.039380807288599301 -2.5026315063544895];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.0676833787374776;2.34121949228358;0.692336348039903];
y1_step1.xoffset = [-14.7746761265965;-0.427127829447814;-1.44438465903334];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
